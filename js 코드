<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>연애 성향 테스트</title>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
      max-width: 600px;
      margin: auto;
    }
    .question-text {
      font-size: 1.2rem;
      margin-bottom: 1rem;
    }
    .choice-btn {
      display: block;
      width: 100%;
      margin: 0.5rem 0;
      padding: 0.75rem;
      font-size: 1rem;
      cursor: pointer;
    }
    .choice-btn.selected {
      background-color: #6a6aff;
      color: white;
      font-weight: bold;
    }
    #result-container {
      display: none;
      text-align: center;
      margin-top: 2rem;
      font-size: 1.2rem;
    }
  </style>
</head>
<body>

  <div id="quiz-container">
    <div id="question-number"></div>
    <div id="question-text" class="question-text"></div>
    <div id="choices"></div>
  </div>

  <div id="result-container">
    <h2 id="result-text"></h2>
    <button onclick="location.reload()">다시하기</button>
  </div>

  <script>
    const questions = [
      { question: "연애에서 중요한 건??", choices: ["A: 서로 존중하는 감정", "B: 문제 없게 조율되는 구조"], scores: ["F", "T"] },
      { question: "연인이 갑자기 약속을 취소하면 나는?", choices: ["A: 미리 말했으면 괜찮았을 텐데", "B: 어쩔 수 없는 일이였겠지"], scores: ["J", "P"] },
      { question: "선물 고를 때 나는?", choices: ["A: 실용적인 것을 고르는 게 낫다", "B: 의미있는 것을 주고 싶다"], scores: ["S", "N"] },
      { question: "더 끌리는 데이트는?", choices: ["A: 사람 많은 핫플레이스!", "B: 안돼, 난 무조건 집!"], scores: ["E", "I"] },
      { question: "데이트할 때, 너라면...", choices: ["A: 신나게 사람들이 모인 파티에서 사랑을 꽃피운다", "B: 별빛 아래 조용한 카페에서 마음을 나눈다"], scores: ["E", "I"] },
      { question: "연인이 좋아하는 가수 콘서트를 가자고 할 때, 당신은?", choices: ["A: 자리부터 예매하고 코디를 상상한다", "B: 일단 가자고 해놓고 막판에 고민한다"], scores: ["J", "P"] },
      { question: "기념일에 선물 고를 때 너는?", choices: ["A: 매년 똑같은 꽃과 초콜릿, 전통 고수자", "B: 이번엔 뭐 새로운 거 해볼까?"], scores: ["S", "N"] },
      { question: "누군가에게 고백 받았을 때?", choices: ["A: 감정이 진짜일까?", "B: 나를 왜 좋아하게 됐을까?"], scores: ["S", "N"] },
      { question: "미래에 대한 연애관은 어떤 편?", choices: ["A: 현재에 충실, 하루 하루 함께가 중요해!", "B: 서로의 꿈과 가능성을 함께 만들어야지"], scores: ["S", "N"] },
      { question: "상대방이 속상할 때, 어떻게 할거야?", choices: ["A: 자연스럽게 감정을 나누고, 표현해야지", "B: 감정보다는 생각을 말하는 게 편해"], scores: ["F", "T"] }
    ];

    function shuffle(array) {
      for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
      }
    }

    shuffle(questions);

    let current = 0;
    const mbtiScores = { E: 0, I: 0, S: 0, N: 0, T: 0, F: 0, J: 0, P: 0 };

    const questionNumber = document.getElementById('question-number');
    const questionText = document.getElementById('question-text');
    const choicesContainer = document.getElementById('choices');
    const resultContainer = document.getElementById('result-container');
    const resultText = document.getElementById('result-text');

    function renderQuestion(index) {
      const q = questions[index];
      questionNumber.textContent = `질문 ${index + 1} / ${questions.length}`;
      questionText.textContent = q.question;
      choicesContainer.innerHTML = '';

      q.choices.forEach((choice, i) => {
        const btn = document.createElement('button');
        btn.className = 'choice-btn';
        btn.textContent = choice;
        btn.onclick = () => {
          const scoreType = q.scores[i];
          mbtiScores[scoreType]++;

          if (current < questions.length - 1) {
            current++;
            renderQuestion(current);
          } else {
            showResult();
          }
        };
        choicesContainer.appendChild(btn);
      });
    }

    function showResult() {
      document.getElementById('quiz-container').style.display = 'none';
      resultContainer.style.display = 'block';

      let mbti = '';
      mbti += mbtiScores.E >= mbtiScores.I ? 'E' : 'I';
      mbti += mbtiScores.S >= mbtiScores.N ? 'S' : 'N';
      mbti += mbtiScores.T >= mbtiScores.F ? 'T' : 'F';
      mbti += mbtiScores.J >= mbtiScores.P ? 'J' : 'P';

      const descriptions = {
        'ISTJ': '차분한 매력인간',
        'ISFJ': '연애 내조왕',
        'INFJ': '감정 예언자',
        'INTJ': '계획된 연애 마스터',
        'ISTP': '즉흥적인 연애마스터',
        'ISFP': '자유로운 낭만가',
        'INFP': '감성 폭발 로맨티스트',
        'INTP': '논리 사랑 탐구자',
        'ESTP': '반짝이는 눈빛의 유혹인간',
        'ESFP': '무대 위 사랑꾼',
        'ENFP': '자유로운 영혼의 연인',
        'ENTP': '논리도, 감정도 다 해보는 연애 실험가',
        'ESTJ': '섹시한 자신감',
        'ESFJ': '사랑 넘치는 분위기 메이커',
        'ENFJ': '사랑 주는 햇살',
        'ENTJ': '당당한 매력인간'
      };

      resultText.innerText = `${mbti}형 - ${descriptions[mbti] || '독특하고 개성 있는 연애 스타일!'}`;
    }

    renderQuestion(current);
  </script>

</body>
</html>
